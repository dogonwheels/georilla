<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <script src="jquery-1.4.2.js"></script>
  <link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
  <script type="text/javascript" src="qunit.js"></script>
  <script type="text/javascript" src="georilla.js"></script>
  <script>
  $(document).ready(function(){

module('Geolocation');

var fakePosition0 =  { coords : { latitude: 1, longitude: 2, accuracy: 3 },
                       timestamp: 4 }
var fakePosition1 =  { coords : { latitude: 2, longitude: 3, accuracy: 4 },
                       timestamp: 5 }

asyncTest('Notified when position already set', function() {  
    var success = function (latestPosition) {
        equals(latestPosition, fakePosition0, "Successfully set position");
        start();
    };
    var geo = georilla.newGeolocation();
    geo.setCurrentPosition(fakePosition0);
    geo.getCurrentPosition(success);
});

asyncTest('Notified when position set within timeout', function() {
    var success = function (latestPosition) {
        equals(latestPosition, fakePosition0, "Successfully set position");
        start();
    };

    var geo = georilla.newGeolocation();
    // Default timeout in infinite, so we should get called with the latest
    // position when it's set after the call to getCurrentPosition
    geo.getCurrentPosition(success);
    geo.setCurrentPosition(fakePosition0);
});

asyncTest('Only notified once', function() {
    count = 0;
    var success = function (latestPosition) {
        count++;
        equals(count, 1, "Success only called once");
        start();
    }
    var geo = georilla.newGeolocation();
    geo.getCurrentPosition(success);
    geo.setCurrentPosition(fakePosition0);
    geo.setCurrentPosition(fakePosition1);
});


asyncTest('Receive timeout error when position not set within timeout', function() {
    // Set the timeout to a negative value - so no timeout

    // Use a small timeout

});

asyncTest('Respect age of positions', function() {
});



});
  </script>
  
</head>
<body>
  <h1 id="qunit-header">Georilla Tests</h1>
 <h2 id="qunit-banner"></h2>
 <h2 id="qunit-userAgent"></h2>
 <ol id="qunit-tests"></ol>
</body>
</html>

